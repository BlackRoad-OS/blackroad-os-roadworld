<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BlackRoad Earth | RoadWorld Module</title>

    <!-- MapLibre GL -->
    <script src="https://unpkg.com/maplibre-gl@3.6.2/dist/maplibre-gl.js"></script>
    <link href="https://unpkg.com/maplibre-gl@3.6.2/dist/maplibre-gl.css" rel="stylesheet" />

    <!-- Styles -->
    <link rel="stylesheet" href="../src/css/main.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <style>
    :root{--black:#000;--ink:#0A0A0A;--surface:#111;--border:#1A1A1A;--dim:#666;--sub:#999;--white:#FFF;--pink:#FF1D6C;--amber:#F5A623;--violet:#9C27B0;--blue:#2979FF;--green:#00FF88;--gradient:linear-gradient(135deg,#F5A623 0%,#FF1D6C 38.2%,#9C27B0 61.8%,#2979FF 100%);--xs:8px;--sm:13px;--md:21px;--lg:34px;--xl:55px;--xxl:89px}
    *,*::before,*::after{margin:0;padding:0;box-sizing:border-box}
    body{font-family:'JetBrains Mono',monospace;background:#000;color:#fff;line-height:1.618;overflow-x:hidden;-webkit-font-smoothing:antialiased;padding-top:70px}
    h1{font-size:clamp(40px,8vw,100px);font-weight:600;letter-spacing:-.02em;line-height:1.1;background:linear-gradient(135deg,#F5A623 0%,#FF1D6C 38.2%,#9C27B0 61.8%,#2979FF 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;margin-bottom:21px}
    h2{font-size:clamp(24px,4vw,48px);font-weight:600;letter-spacing:-.02em;color:#fff;margin-bottom:21px}
    h3{font-size:clamp(16px,2vw,24px);font-weight:600;color:#fff;margin-bottom:13px}
    h4,h5,h6{color:#fff}
    p{color:#999;line-height:1.8;margin-bottom:21px}
    a{color:#2979FF;text-decoration:none;transition:color .2s}
    a:hover{color:#FF1D6C}
    strong{color:#fff}
    code{font-family:inherit;background:#111;color:#00FF88;padding:2px 6px;border:1px solid #1A1A1A}
    pre{background:#0A0A0A;border:1px solid #1A1A1A;border-left:2px solid #FF1D6C;padding:21px 34px;color:#00FF88;overflow-x:auto;margin-bottom:34px}
    hr{border:none;height:1px;background:linear-gradient(135deg,#F5A623,#FF1D6C,#9C27B0,#2979FF);opacity:.3;margin:55px 0}
    nav,.nav{position:fixed;top:0;left:0;right:0;z-index:1000;display:flex;justify-content:space-between;align-items:center;padding:21px 55px;background:rgba(0,0,0,.85);backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px);border-bottom:1px solid #1A1A1A}
    nav a,.nav a{color:#999;font-size:13px}
    nav a:hover,.nav a:hover{color:#fff}
    .logo{font-size:20px;font-weight:700;background:linear-gradient(135deg,#F5A623 0%,#FF1D6C 38.2%,#9C27B0 61.8%,#2979FF 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
    header{padding:21px 55px 0;display:flex;justify-content:space-between;align-items:center}
    header .logo{font-size:22px;font-weight:700;background:linear-gradient(135deg,#F5A623 0%,#FF1D6C 38.2%,#9C27B0 61.8%,#2979FF 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
    header nav{position:static;background:none;backdrop-filter:none;border:none;padding:0;display:flex;gap:34px}
    .hero,section.hero{min-height:90vh;display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center;padding:89px 55px;position:relative;overflow:hidden}
    .hero::before{content:'';position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:500px;height:500px;background:radial-gradient(circle,rgba(255,29,108,.15) 0%,rgba(156,39,176,.1) 40%,transparent 70%);pointer-events:none;animation:orb 8s ease-in-out infinite}
    @keyframes orb{0%,100%{transform:translate(-50%,-50%) scale(1);opacity:.6}50%{transform:translate(-50%,-50%) scale(1.3);opacity:1}}
    .hero p,.tagline{font-size:18px;max-width:600px;color:#999;margin-bottom:55px;position:relative;z-index:1}
    .hero h1{position:relative;z-index:1}
    .earth-glow,.hero-glow,.neural-bg{position:absolute;inset:0;background:radial-gradient(ellipse at center,rgba(255,29,108,.07) 0%,transparent 60%);pointer-events:none}
    section{padding:89px 55px;position:relative}
    section:not(.hero){max-width:1200px;margin-left:auto;margin-right:auto}
    section h2{color:#fff;-webkit-text-fill-color:#fff}
    .btn,.btn-primary{display:inline-block;padding:13px 34px;font-family:inherit;font-size:14px;font-weight:600;background:#FF1D6C;color:#fff;text-decoration:none;border:none;cursor:pointer;transition:all .2s;position:relative;z-index:1}
    .btn:hover,.btn-primary:hover{background:#fff;color:#000;transform:translateY(-2px)}
    .features-grid,.ai-features,.pillars{display:flex;flex-wrap:wrap;gap:34px;justify-content:center}
    .feature-card,.ai-feature,.pillar{background:rgba(255,255,255,.02);border:1px solid #1A1A1A;padding:55px;transition:all .3s;flex:1;min-width:220px;max-width:360px}
    .feature-card:hover,.ai-feature:hover,.pillar:hover{background:rgba(255,255,255,.05);border-color:rgba(255,29,108,.4);transform:translateY(-4px)}
    .feature-icon,.ai-feature-icon,.pillar-icon{font-size:28px;margin-bottom:21px;display:block}
    .feature-card h3,.ai-feature-title,.pillar-name{color:#fff;margin-bottom:8px}
    .feature-card p,.ai-feature-desc{font-size:14px;color:#666}
    .badge,.ai-badge{display:inline-block;padding:4px 13px;font-size:11px;letter-spacing:.1em;text-transform:uppercase;border:1px solid #1A1A1A;color:#999;margin-bottom:21px}
    footer,.footer{padding:55px;border-top:1px solid #1A1A1A;color:#666;font-size:13px;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:21px}
    footer a,.footer a{color:#999}
    footer a:hover,.footer a:hover{color:#FF1D6C}
    @media(max-width:768px){nav,.nav{padding:21px}.hero,section.hero{padding:89px 21px}.features-grid,.ai-features,.pillars{flex-direction:column}.feature-card,.ai-feature{min-width:unset;max-width:unset}footer,.footer{flex-direction:column;text-align:center;padding:34px 21px}}
  </style>
</head>
<body>
    <div id="map"></div>
    <div class="crosshair"></div>

    <!-- Header -->
    <div class="ui-overlay header">
        <div>
            <div class="logo">BLACKROAD EARTH</div>
            <div class="logo-sub">ROADWORLD MODULE</div>
        </div>
        <div class="stats">
            <div class="stat">
                <div class="stat-value highlight" id="zoom-level">1.0</div>
                <div class="stat-label">Zoom Level</div>
            </div>
            <div class="stat">
                <div class="stat-value" id="altitude">10,000 km</div>
                <div class="stat-label">Altitude</div>
            </div>
            <div class="stat">
                <div class="stat-value" id="resolution">10 km/px</div>
                <div class="stat-label">Resolution</div>
            </div>
            <div class="stat">
                <div class="stat-value" id="coordinates">0Â°, 0Â°</div>
                <div class="stat-label">Center</div>
            </div>
        </div>
    </div>

    <div class="globe-mode-indicator">
        <div class="mode-dot"></div>
        <span id="view-mode">GLOBE VIEW</span>
    </div>

    <!-- Search -->
    <div class="ui-overlay search-container">
        <input type="text" class="search-input" id="search" placeholder="Search any location... (Times Square, Eiffel Tower, 123 Main St)">
        <button class="search-btn" id="search-btn">FLY TO</button>
    </div>

    <!-- Zoom Panel -->
    <div class="ui-overlay zoom-panel">
        <div class="zoom-title">DETAIL LEVEL</div>
        <div class="zoom-bar">
            <div class="zoom-fill" id="zoom-fill" style="width: 5%"></div>
        </div>
        <div class="zoom-labels">
            <span>Space</span>
            <span>Street</span>
        </div>
        <div class="scale-list">
            <div class="scale-item active" data-min="0" data-max="3">
                <span class="scale-icon">ğŸŒ</span>
                <span>Planet View</span>
            </div>
            <div class="scale-item" data-min="3" data-max="6">
                <span class="scale-icon">ğŸ—ºï¸</span>
                <span>Continent</span>
            </div>
            <div class="scale-item" data-min="6" data-max="10">
                <span class="scale-icon">ğŸ”ï¸</span>
                <span>Region / Country</span>
            </div>
            <div class="scale-item" data-min="10" data-max="14">
                <span class="scale-icon">ğŸ™ï¸</span>
                <span>City</span>
            </div>
            <div class="scale-item" data-min="14" data-max="17">
                <span class="scale-icon">ğŸ˜ï¸</span>
                <span>Neighborhood</span>
            </div>
            <div class="scale-item" data-min="17" data-max="20">
                <span class="scale-icon">ğŸ </span>
                <span>Street Level</span>
            </div>
            <div class="scale-item" data-min="20" data-max="24">
                <span class="scale-icon">ğŸš¶</span>
                <span>Building Detail</span>
            </div>
        </div>
    </div>

    <!-- Info Panel -->
    <div class="ui-overlay info-panel">
        <div class="info-section">
            <div class="info-label">Location</div>
            <div class="info-value large" id="location-name">Earth</div>
        </div>
        <div class="info-section">
            <div class="info-label">Latitude</div>
            <div class="info-value" id="lat">0.000000Â°</div>
        </div>
        <div class="info-section">
            <div class="info-label">Longitude</div>
            <div class="info-value" id="lng">0.000000Â°</div>
        </div>
        <div class="info-section">
            <div class="info-label">Tile Coordinates</div>
            <div class="info-value" id="tile-coords">z0 / x0 / y0</div>
        </div>
        <div class="info-section">
            <div class="info-label">Saved Locations</div>
            <div class="info-value" id="saved-count">0</div>
        </div>
    </div>

    <!-- Layer Selection -->
    <div class="ui-overlay layer-panel">
        <button class="layer-btn active" data-style="satellite">ğŸ›°ï¸ Satellite</button>
        <button class="layer-btn" data-style="streets">ğŸ—ºï¸ Streets</button>
        <button class="layer-btn" data-style="dark">ğŸŒ™ Dark</button>
        <button class="layer-btn" data-style="terrain">ğŸ”ï¸ Terrain</button>
        <button class="layer-btn" data-style="hybrid">ğŸ”€ Hybrid</button>
    </div>

    <!-- Quick Locations -->
    <div class="ui-overlay quick-locations">
        <button class="quick-btn" data-lat="40.7580" data-lng="-73.9855" data-zoom="18">Times Square <span>NYC</span></button>
        <button class="quick-btn" data-lat="48.8584" data-lng="2.2945" data-zoom="18">Eiffel Tower <span>Paris</span></button>
        <button class="quick-btn" data-lat="35.6595" data-lng="139.7004" data-zoom="18">Shibuya Crossing <span>Tokyo</span></button>
        <button class="quick-btn" data-lat="51.5007" data-lng="-0.1246" data-zoom="18">Big Ben <span>London</span></button>
        <button class="quick-btn" data-lat="40.6892" data-lng="-74.0445" data-zoom="17">Statue of Liberty <span>NYC</span></button>
        <button class="quick-btn" data-lat="37.8199" data-lng="-122.4783" data-zoom="16">Golden Gate <span>SF</span></button>
    </div>

    <!-- Controls -->
    <div class="ui-overlay controls">
        <button class="ctrl-btn" id="btn-home" title="Home">ğŸ </button>
        <button class="ctrl-btn" id="btn-north" title="Reset North">ğŸ§­</button>
        <div class="divider"></div>
        <button class="ctrl-btn" id="btn-zoom-in" title="Zoom In">+</button>
        <button class="ctrl-btn" id="btn-zoom-out" title="Zoom Out">âˆ’</button>
        <div class="divider"></div>
        <button class="ctrl-btn" id="btn-3d" title="3D Buildings">ğŸ¢</button>
        <button class="ctrl-btn" id="btn-globe" title="Globe View">ğŸŒ</button>
        <div class="divider"></div>
        <button class="ctrl-btn" id="btn-locate" title="My Location">ğŸ“</button>
        <button class="ctrl-btn" id="btn-save" title="Save Location">ğŸ’¾</button>
        <button class="ctrl-btn" id="btn-marker" title="Add Marker">ğŸ¯</button>
        <div class="divider"></div>
        <button class="ctrl-btn" id="btn-measure" title="Measure Distance">ğŸ“</button>
        <button class="ctrl-btn" id="btn-share" title="Share Location">ğŸ”—</button>
        <button class="ctrl-btn" id="btn-tools" title="More Tools">ğŸ› ï¸</button>
    </div>

    <!-- Instructions -->
    <div class="ui-overlay instructions">
        <div><kbd>DRAG</kbd> Pan / Rotate</div>
        <div><kbd>SCROLL</kbd> Zoom</div>
        <div><kbd>CTRL+DRAG</kbd> Tilt</div>
        <div><kbd>RIGHT-CLICK</kbd> Rotate</div>
    </div>

    <!-- Tools Panel -->
    <div class="ui-overlay tools-panel" id="tools-panel" style="display: none;">
        <div class="panel-header">
            <span>Tools</span>
            <button class="panel-close" id="tools-close">âœ•</button>
        </div>
        <div class="panel-content">
            <div class="tool-section">
                <h4>Measurement</h4>
                <button class="tool-btn" id="measure-distance">ğŸ“ Measure Distance</button>
                <button class="tool-btn" id="measure-area">ğŸ“ Measure Area</button>
                <button class="tool-btn" id="measure-clear">ğŸ—‘ï¸ Clear Measurements</button>
                <div class="measurement-result" id="measurement-result"></div>
            </div>
            <div class="tool-section">
                <h4>Markers</h4>
                <button class="tool-btn" id="add-marker-custom">ğŸ¯ Add Marker Here</button>
                <button class="tool-btn" id="view-markers">ğŸ“ View All Markers</button>
                <button class="tool-btn" id="clear-markers">ğŸ—‘ï¸ Clear All Markers</button>
            </div>
            <div class="tool-section">
                <h4>Share</h4>
                <button class="tool-btn" id="copy-url">ğŸ”— Copy Share Link</button>
                <button class="tool-btn" id="export-view">ğŸ“¸ Export View</button>
            </div>
        </div>
    </div>

    <!-- Marker Add Panel -->
    <div class="ui-overlay marker-add-panel" id="marker-add-panel" style="display: none;">
        <div class="panel-header">
            <span>Add Marker</span>
            <button class="panel-close" id="marker-add-close">âœ•</button>
        </div>
        <div class="panel-content">
            <div class="form-group">
                <label>Name</label>
                <input type="text" id="marker-name" placeholder="Enter marker name" />
            </div>
            <div class="form-group">
                <label>Category</label>
                <select id="marker-category">
                    <option value="custom">Custom</option>
                    <option value="favorite">Favorite</option>
                    <option value="work">Work</option>
                    <option value="home">Home</option>
                    <option value="travel">Travel</option>
                    <option value="food">Food</option>
                </select>
            </div>
            <div class="form-group">
                <label>Description (optional)</label>
                <textarea id="marker-description" placeholder="Add a description"></textarea>
            </div>
            <button class="tool-btn primary" id="marker-save">Save Marker</button>
        </div>
    </div>

    <!-- Saved Locations Panel -->
    <div class="ui-overlay saved-panel" id="saved-panel" style="display: none;">
        <div class="panel-header">
            <span>Saved Locations</span>
            <button class="panel-close" id="saved-close">âœ•</button>
        </div>
        <div class="panel-content">
            <div id="saved-locations-list" class="saved-list"></div>
        </div>
    </div>

    <!-- Game HUD -->
    <div class="game-hud" id="game-hud" style="display: none;">
        <div class="hud-section">
            <div class="hud-label">Level</div>
            <div class="hud-value" id="hud-level">1</div>
            <div class="hud-progress">
                <div class="hud-progress-bar" id="hud-xp-bar" style="width: 0%"></div>
            </div>
            <div class="hud-label" style="margin-top: 4px; font-size: 8px;">
                <span id="hud-xp">0</span> / <span id="hud-xp-next">100</span> XP
            </div>
        </div>

        <div class="hud-section">
            <div class="hud-label">Inventory</div>
            <div class="hud-inventory">
                <div class="hud-item">
                    <span class="hud-item-icon">â­</span>
                    <span class="hud-item-count" id="hud-stars">0</span>
                </div>
                <div class="hud-item">
                    <span class="hud-item-icon">ğŸ’</span>
                    <span class="hud-item-count" id="hud-gems">0</span>
                </div>
                <div class="hud-item">
                    <span class="hud-item-icon">ğŸ†</span>
                    <span class="hud-item-count" id="hud-trophies">0</span>
                </div>
                <div class="hud-item">
                    <span class="hud-item-icon">ğŸ—ï¸</span>
                    <span class="hud-item-count" id="hud-keys">0</span>
                </div>
            </div>
        </div>

        <div class="hud-section">
            <div class="hud-label">Stats</div>
            <div style="font-size: 11px; line-height: 1.6;">
                <div>ğŸš¶ <span id="hud-distance">0 m</span></div>
                <div>âœ¨ <span id="hud-collected">0</span> items</div>
            </div>
        </div>
    </div>

    <!-- Game Toggle Button -->
    <button class="game-toggle-btn" id="game-toggle" title="Toggle Game Mode">
        ğŸ®
    </button>

    <!-- JavaScript Modules -->
    <script type="module" src="../src/js/main.js"></script>

    <!-- BlackRoad Live Data -->
    <script>
    const LIVE_API = 'https://blackroad-live-hub.amundsonalexa.workers.dev';
    async function loadRoadWorldData() {
        try {
            const [github, agents] = await Promise.all([
                fetch(`${LIVE_API}/github/stats`).then(r=>r.json()).catch(()=>null),
                fetch(`${LIVE_API}/agents/status`).then(r=>r.json()).catch(()=>null)
            ]);
            const bar = document.createElement('div');
            bar.style.cssText = 'position:fixed;bottom:0;left:0;right:0;background:rgba(0,0,0,0.85);backdrop-filter:blur(8px);padding:8px 20px;display:flex;gap:20px;font-size:12px;font-family:monospace;color:#F5A623;border-top:1px solid rgba(245,166,35,0.3);z-index:9999;';
            const repos = github?.total_repos || '1800+';
            const agentCount = agents?.total || '30K';
            const active = agents?.active || 0;
            bar.innerHTML = `<span>ğŸ—ºï¸ ROADWORLD</span><span>â—† ${repos} repos</span><span>â—† ${agentCount} agents (${active} active)</span><span>â—† <a href="https://blackroad.io" style="color:#FF1D6C;text-decoration:none;">blackroad.io</a></span>`;
            document.body.appendChild(bar);
        } catch(e) {}
    }
    loadRoadWorldData();
    </script>
</body>
</html>
